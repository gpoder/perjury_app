<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>One-time Image View</title>
  <link rel="stylesheet" href="{{ url_for('perjury.static', filename='perjury.css') }}">
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      var seconds = {{ view_seconds|int }};
      var counter = document.getElementById("counter");
      function tick() {
        if (seconds <= 0) {
          window.location.href = "{{ url_for('perjury.index') }}";
          return;
        }
        counter.textContent = seconds;
        seconds -= 1;
        setTimeout(tick, 1000);
      }
      tick();
    });
  </script>
</head>
<body>
  <h1>One-time View</h1>
  <p>You have <span id="counter"></span> seconds to view this image. Reloading will not work.</p>
  <div class="image-container">
    <img src="{{ token.image_url }}" alt="Protected Image">
  </div>
</body>
</html>
